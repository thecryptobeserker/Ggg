<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="author" content="Alan G. Labouseur" />
        <link rel="stylesheet" href="tsos.css" type="text/css" media="screen" />
        <title>
            TSOS - a browser-based virtual Operating System in TypeScript
        </title>

        <!-- Globals CONSTANTS and _Variables. Must included be first. -->
        <script type="text/javascript" src="distrib/globals.js"></script>

        <!-- Host (Virtual Machine / Hardware Simulation) Routines -->
        <script type="text/javascript" src="distrib/host/control.js"></script>
        <script type="text/javascript" src="distrib/host/devices.js"></script>
        <script type="text/javascript" src="distrib/host/cpu.js"></script>
        <script type="text/javascript" src="distrib/host/Memory.js"></script>
        <script
            type="text/javascript"
            src="distrib/host/memoryaccesor.js"
        ></script>

        <!-- Virtual OS Routines: Make sure Kernel code is last, since it needs those above it. -->
        <script type="text/javascript" src="distrib/os/interrupt.js"></script>
        <script type="text/javascript" src="distrib/os/canvastext.js"></script>
        <script type="text/javascript" src="distrib/os/console.js"></script>
        <script
            type="text/javascript"
            src="distrib/os/deviceDriver.js"
        ></script>
        <script
            type="text/javascript"
            src="distrib/os/deviceDriverKeyboard.js"
        ></script>
        <script type="text/javascript" src="distrib/os/queue.js"></script>
        <script type="text/javascript" src="distrib/os/shell.js"></script>
        <script
            type="text/javascript"
            src="distrib/os/shellCommand.js"
        ></script>
        <script type="text/javascript" src="distrib/os/userCommand.js"></script>
        <script
            type="text/javascript"
            src="distrib/os/memorymanager.js"
        ></script>
        <script type="text/javascript" src="distrib/os/pcb.js"></script>
        <script type="text/javascript" src="distrib/os/dispatcher.js"></script>
        <script type="text/javascript" src="distrib/os/scheduler.js"></script>
        <script type="text/javascript" src="distrib/os/kernel.js"></script>
        <!-- Other Routines -->
        <script type="text/javascript" src="distrib/utils.js"></script>
        <!-- Uncomment the line below to enable GLaDOS testing. -->
        <script type="text/javascript" src="test/glados-ip3.js"></script>
    </head>

    <body onload="onDocumentLoad()">
        <div id="divMain" style="width: 100%">
            <div id="divButtonBar" style="margin: 4px">
                <input
                    type="button"
                    id="btnStartOS"
                    name="brnStartOS"
                    class="normal_button"
                    value="Start"
                    tabindex="0"
                    onclick="TSOS.Control.hostBtnStartOS_click(this);"
                />

                <input
                    type="button"
                    id="btnHaltOS"
                    name="brnHaltOS"
                    class="normal_button"
                    disabled="disabled"
                    value="Halt"
                    tabindex="1"
                    onclick="TSOS.Control.hostBtnHaltOS_click(this);"
                />

                <input
                    type="button"
                    id="btnReset"
                    name="brnReset"
                    class="normal_button"
                    disabled="disabled"
                    value="Reset"
                    tabindex="2"
                    onclick="TSOS.Control.hostBtnReset_click(this);"
                />
            </div>

            <div
                id="divConsole"
                style="margin: 4px; width: 500px; height: 500px; float: left"
            >
                <canvas id="display" width="500px" height="500px" tabindex="3">
                </canvas>
            </div>

            <div id="divLog" style="margin-left: 520px">
                <label>
                    Host Log
                    <br />
                    <textarea
                        name="taHostLog"
                        id="taHostLog"
                        rows="26"
                        cols="48"
                    ></textarea>
                </label>
            </div>

            <div id="divUserProgramInput" style="margin-left: 520px">
                <label>
                    User Program Input
                    <br />
                    <textarea
                        name="taProgramInput"
                        id="taProgramInput"
                        rows="8"
                        cols="48"
                    ></textarea>
                </label>
            </div>
        </div>
        <div
            id="divStatusContainer"
            style="
                display: flex;
                position: absolute;
                top: 10px;
                left: 950px;
                gap: 20px;
            "
        >
            <div id="divSystemStatus" style="width: 360px">
                <h3 style="text-align: center">System Status</h3>

                <div style="margin-bottom: 12px">
                    <strong>CPU Status</strong>
                    <pre id="cpuDisplay" class="statusBox"></pre>
                </div>

                <div style="margin-bottom: 12px">
                    <strong>Current PCB</strong>
                    <pre id="pcbDisplay" class="statusBox"></pre>
                </div>

                <div
                    style="
                        margin-bottom: 12px;
                        max-height: 200px;
                        overflow-y: auto;
                    "
                >
                    <strong>Ready Queue</strong>
                    <pre
                        id="readyQueueDisplay"
                        class="statusBox memoryBox"
                    ></pre>
                </div>
            </div>

            <div id="divMemory" style="width: 360px">
                <h3 style="text-align: center"><strong>Memory</strong></h3>
                <pre
                    id="memoryDisplay"
                    class="statusBox memoryBox"
                    style="height: 540px"
                ></pre>
            </div>
        </div>

        <style>
            .statusBox {
                width: 320px;
                height: 140px;
                background: #111;
                color: #0f0;
                font-family: monospace;
                padding: 10px;
                border: 2px solid #444;
                border-radius: 6px;
                font-size: 13px;

                white-space: pre-wrap;
                word-wrap: break-word;
                overflow-x: hidden;
            }

            .memoryBox {
                line-height: 1.3em;
                font-size: 12px;
            }

            .memoryBox::-webkit-scrollbar {
                width: 8px;
            }
            .memoryBox::-webkit-scrollbar-thumb {
                background: #333;
                border-radius: 4px;
            }
        </style>

        <!-- Taskbar -->
        <div
            id="taskbar"
            style="
                width: 100%;
                background: #222;
                color: #fff;
                padding: 4px;
                font-family: monospace;
                display: flex;
                justify-content: space-between;
                align-items: center;
            "
        >
            <span id="taskbar-time"></span>
            <span id="taskbar-status">Welcome to TSOS!</span>
        </div>

        <style>
            #taskbar {
                position: fixed;
                width: 100%;
                height: 100px;
                bottom: 8%;
                background: #000000;
                color: rgb(255, 255, 255);
                font-family: monospace;
                display: flex;
                align-items: center;
                padding: 0 10px;
                box-sizing: border-box;
            }
        </style>
        <div>
            <p class="footerText" style="clear: both">
                <br />
                Copyright &copy; 2008 - 2112 No Rights Reserved.
                <br />
                Reproduction is inhibited without the express written consent of
                Ted Codd, Stevie Ray Vaughan, Neil Peart, and Ian Fleming.
            </p>
        </div>
    </body>
</html>
